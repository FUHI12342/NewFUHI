{% extends 'booking/base.html' %}
{% load i18n %}
{% load static %}

{% block title %}{{ store.name }}{% trans "店 在籍占い師" %} | {{ block.super }}{% endblock %}

{% block content %}

<!-- Breadcrumb -->
<nav class="mb-6">
    <ol class="flex items-center text-sm text-gray-500 gap-1.5">
        <li>
            <a href="{% url 'booking:store_list' %}" class="hover:text-salon-brown transition">{% trans "ホーム" %}</a>
        </li>
        <li class="text-gray-300">&gt;</li>
        <li>
            <a href="{% url 'booking:staff_list' store.pk %}" class="hover:text-salon-brown transition">{{ store.name }}</a>
        </li>
        <li class="text-gray-300">&gt;</li>
        <li class="text-salon-brown font-medium">{% trans "在籍占い師" %}</li>
    </ol>
</nav>

<!-- Page Heading -->
<div class="mb-6">
    <h1 class="text-2xl font-bold text-salon-dark">{{ store.name }}{% trans "店 在籍占い師" %}</h1>
</div>

<!-- Staff Card Grid -->
<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5">
    {% for staff in staff_list %}
    <a href="{% url 'booking:staff_calendar' staff.pk %}"
       class="block bg-white border border-gray-200 rounded-lg shadow-sm hover:shadow-md hover:border-salon-brown/40 transition-all duration-200 overflow-hidden">

        <!-- Thumbnail -->
        <div class="aspect-square w-full overflow-hidden bg-salon-beige">
            {% if staff.thumbnail %}
            <img src="{{ staff.thumbnail.url }}"
                 alt="{{ staff.name }}"
                 class="w-full h-full object-cover">
            {% else %}
            <div class="w-full h-full flex items-center justify-center">
                <img src="{% static 'images/siteid.png' %}"
                     alt="{{ staff.name }}"
                     class="max-w-[60%] max-h-[60%] object-contain opacity-40">
            </div>
            {% endif %}
        </div>

        <!-- Card Body -->
        <div class="px-5 py-4 space-y-2">
            <!-- Staff Name -->
            <h2 class="text-lg font-bold text-salon-dark">
                {{ staff.name }} <span class="text-base font-normal text-gray-500">{% trans "先生" %}</span>
            </h2>

            <!-- Price -->
            <p class="text-sm text-salon-brown font-medium">
                {% trans "鑑定料" %}：{{ staff.price }} {% trans "円（１時間）" %}
            </p>

            <!-- Introduction -->
            {% if staff.introduction %}
            <p class="text-sm text-gray-600 leading-relaxed line-clamp-3">
                {{ staff.introduction|truncatechars:100 }}
            </p>
            {% endif %}
        </div>

        <!-- Card Footer -->
        <div class="px-5 py-3 bg-gray-50 border-t border-gray-100 text-right">
            <span class="text-xs font-medium text-salon-brown">{% trans "予約カレンダーを見る" %} &rarr;</span>
        </div>
    </a>
    {% empty %}
    <!-- Empty State -->
    <div class="col-span-full text-center py-16">
        <svg class="w-16 h-16 text-gray-300 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                  d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/>
        </svg>
        <p class="text-gray-400 text-sm">{% trans "現在この店舗に占い師は在籍していません。" %}</p>
    </div>
    {% endfor %}
</div>

{% endblock %}
