{% extends "admin/base.html" %}
{% load i18n %}

{% block title %}{{ title }} | {% trans 'サイト管理' %}{% endblock %}

{% block branding %}
<h1 id="site-name">
    <a href="{% url 'admin:index' %}">{% trans 'サイト管理' %}</a>
</h1>
{% endblock %}

{% block usertools %}
<form action="{% url 'set_language' %}" method="post" style="display:inline;margin-right:10px;">
    {% csrf_token %}
    <input type="hidden" name="next" value="{{ request.path }}">
    <select name="language" onchange="this.form.submit()" style="padding:2px 6px;border-radius:3px;border:1px solid #ccc;font-size:12px;background:#fff;color:#333;">
        {% for lang_code, lang_name in available_languages %}
        <option value="{{ lang_code }}" {% if lang_code == current_language %}selected{% endif %}>{{ lang_name }}</option>
        {% endfor %}
    </select>
</form>
{{ block.super }}
{% endblock %}

{% block extrastyle %}
{{ block.super }}
<style>
    /* AdminTheme カスタムカラー */
    {% if admin_theme %}
    :root {
        --admin-primary-color: {{ admin_theme.primary_color|default:"#417690" }};
        --admin-secondary-color: {{ admin_theme.secondary_color|default:"#f1f0ec" }};
    }
    #header {
        background: var(--admin-primary-color) !important;
        {% if admin_theme.header_image %}
        background-image: url('{{ admin_theme.header_image.url }}') !important;
        background-size: cover !important;
        background-position: center !important;
        {% endif %}
    }
    #header a:link, #header a:visited {
        color: #fff;
    }
    div.breadcrumbs {
        background: var(--admin-primary-color) !important;
        opacity: 0.9;
    }
    .module h2, .module caption, .inline-group h2 {
        background: var(--admin-primary-color) !important;
    }
    a:link, a:visited {
        color: var(--admin-primary-color);
    }
    input[type="submit"], .submit-row input, button.default {
        background: var(--admin-primary-color) !important;
        border-color: var(--admin-primary-color) !important;
    }
    input[type="submit"]:hover, .submit-row input:hover, button.default:hover {
        opacity: 0.85;
    }
    {% endif %}
</style>
{% endblock %}
